---
title: Markdown to HTML
description: Convert Markdown to HTML
id: 97790ed3-12f5-44b9-ab43-221ac56be150
date: 2023-Oct-18 17:43:58+08:00
category: frontend
---

æ¶å¥½ blog ä¹Ÿæœ‰å¹¾å€‹æœˆçš„æ™‚é–“ï¼Œä½†èªªä¾†æ…šæ„§ï¼Œä¸€ç›´æ²’æœ‰å¥½å¥½ææ‡‚å°ˆæ¡ˆè£¡é¢ç”¨åˆ°çš„ unifiedã€remark é‚„æœ‰ rehype ä¹‹é–“çš„é—œä¿‚ï¼Œä»¥åŠé€™äº›å‚¢ä¼™ç©¶ç«Ÿæ˜¯å¦‚ä½•æŠŠ Markdownï¼ˆæ›´ç²¾ç¢ºåœ°ä¾†èªªæ˜¯ MDXï¼‰è½‰è®Šæˆ HTML çš„ã€‚æ‰€ä»¥ä»Šå¤©ï¼Œå°±è®“æˆ‘å€‘ä¾†çœ‹çœ‹ä»–å€‘åˆ°åº•è®Šäº†ä»€éº¼æŠŠæˆ²ï¼

é¦–å…ˆï¼Œè¦å¾ä¸€åˆ‡çš„æ ¹æº â€” unified é–‹å§‹èªªèµ·ã€‚

## ä»€éº¼æ˜¯ unified

unified æ˜¯ä¸€æ•´åŒ…ç”± plugins æ‰€çµ„æˆçš„ç”Ÿæ…‹ç³»ï¼Œç”¨ä¾†ç”¢å‡ºåŠæ“ç¸± contentsã€‚é€™è£¡çš„ contents æŒ‡çš„æ˜¯ Markdownã€HTML æˆ–ç´”æ–‡å­—ï¼Œé€™äº›å¯ä»¥ç”¨ä¾†è¡¨é”æˆ–æ‰¿è£æŸäº›è³‡æ–™çš„æ ¼å¼ã€‚

è€Œ [[unified]] å¯ä»¥å°‡é€™äº›ä¸åŒæ ¼å¼çš„è³‡æ–™è½‰è®Šæˆ syntax treeï¼Œå†äº¤çµ¦å„å¼å„æ¨£çš„ plugins é€²è¡Œè½‰æ›ã€‚åœ¨ [[unified]] çš„ä½¿ç”¨æƒ…å¢ƒä¸‹ï¼Œæˆ‘å€‘ä¸éœ€è¦æ‰‹å‹•è™•ç† syntax è©²å¦‚ä½•è§£æï¼Œè€Œæ˜¯å¦‚åŒç”Ÿç”¢ç·šèˆ¬ï¼Œå°‡ä¸€å€‹å€‹ plugins çµ¦ã€Œä¸²ã€èµ·ä¾†ã€‚

åœ¨ [[unified]] ç•¶ä¸­æœ‰å››å€‹ä¸»è¦çš„ç”Ÿæ…‹ç³»ï¼Œåˆ†åˆ¥ç”¨ä¾†è§£æåŠè™•ç†ä¸åŒçš„è³‡æ–™æ ¼å¼ï¼š

- [[remark]]Â â€” Markdown
- [[rehype]]Â â€”Â HTML
- [retext](https://unifiedjs.com/explore/project/retextjs/retext/)Â â€” Natural language
- [redot](https://unifiedjs.com/explore/project/redotjs/redot/)Â â€” Graphviz

è€Œé€™äº›è§£æå·¥å…·ï¼Œå‰‡æœƒä¾æ“šä¸åŒçš„è¦ç¯„ï¼ˆspecificationï¼‰ï¼Œå°‡è³‡æ–™è§£ææˆ syntax treeã€‚é€™äº› spec åˆ†åˆ¥ç‚ºï¼š

- [unist](https://github.com/syntax-tree/unist)Â â€” Universal Syntax Tree
- [mdast](https://github.com/syntax-tree/mdast)Â â€” Markdown Abstract Syntax Tree format
- [hast](https://github.com/syntax-tree/hast)Â â€”Â HTMLÂ Abstract Syntax Tree format
- [xast](https://github.com/syntax-tree/xast)Â â€”Â XMLÂ Abstract Syntax Tree format
- [esast](https://github.com/syntax-tree/esast)Â â€” ECMAScript Abstract Syntax Tree format
- [nlcst](https://github.com/syntax-tree/nlcst)Â â€” Natural Language Concrete Syntax Tree format

å› æ­¤ï¼Œä¸€å€‹æª”æ¡ˆæœƒæ­·ç¶“ä»¥ä¸‹çš„æ­¥é©Ÿï¼š

1. è§£æï¼ˆParseï¼‰ï¼šç„¡è«–æª”æ¡ˆæ˜¯ [[markdown]]ã€[[HyperText Markup Language (HTML)|HTML]] æˆ–æ˜¯ç´”æ–‡å­—ï¼Œéƒ½é ˆç¶“éè§£æä¸¦è½‰æ›æˆ Syntax Treeï¼Œæ‰èƒ½è¢«æ¥ä¸‹ä¾†çš„æ­¥é©Ÿä½¿ç”¨ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œä¸€ä»½ [[markdown]] æª”æ¡ˆå°±æœƒäº¤ç”± [[remark]] é€™å€‹è™•ç†å·¥å…·ï¼Œä¸¦éµå¾ª [mdast](https://github.com/syntax-tree/mdast) é€™ä»½è¦ç¯„ï¼Œä¾†å°‡ [[markdown]] è§£ææˆ Syntax Treeã€‚
2. è½‰æ›ï¼ˆTransformï¼‰ï¼šåœ¨é€™å€‹éšæ®µï¼Œä½¿ç”¨è€…å¯ä»¥å°‡å„å¼å„æ¨£çš„ pluginsï¼Œä¾ç…§ä¸åŒçš„é †åºè½‰æ›æˆå¿ƒç›®ä¸­çš„æ¨¡æ¨£ã€‚ä¹Ÿå°±æ˜¯è®Šé­”è¡“çš„éšæ®µï¼ŒDO RE MI SOï¼
3. Stringifyï¼šæœ€å¾Œå°‡èª¿æ•´éçš„è³‡æ–™ stringifyï¼Œç¶“ç”± Compiler ç”¢å‡º [[markdown]]ã€[[HyperText Markup Language (HTML)|HTML]] æˆ–æ˜¯ç´”æ–‡å­—ã€‚

åœ¨ [[unified]] çš„ [document](https://github.com/unifiedjs/unified) ä¸­çš„åœ–ï¼Œæç¹ªäº†é€™äº›æ­¥é©Ÿï¼š

```text
| ........................ process ........................... |
| .......... parse ... | ... run ... | ... stringify ..........|

          +--------+                     +----------+
Input ->- | Parser | ->- Syntax Tree ->- | Compiler | ->- Output
          +--------+          |          +----------+
                              X
                              |
                       +--------------+
                       | Transformers |
                       +--------------+
```

æ­¤å¤–ï¼Œä¸å–®å–®åªæ˜¯å°‡åŸæœ‰çš„è³‡æ–™æ ¼å¼åŠ æ²¹æ·»é†‹ã€‚åœ¨ä¸åŒ plugin çš„å¹«åŠ©ä¸‹ï¼Œ[[unified]] é‚„å¯ä»¥å°‡è³‡æ–™åœ¨ä¸åŒæ ¼å¼é–“è½‰æ›ã€‚åƒæ˜¯å°‡ [[markdown]] è½‰æˆ [[HyperText Markup Language (HTML)|HTML]]ã€æˆ–æ˜¯å°‡ [[HyperText Markup Language (HTML)|HTML]] è½‰æˆç´”æ–‡å­—ç­‰ç­‰ã€‚è½‰æ›æ‰€ä¾è³´çš„ plugin å¦‚ä¸‹ï¼š

- [`remark-rehype`](https://unifiedjs.com/explore/package/remark-rehype/)Â â€” Markdown toÂ HTML
- [`rehype-remark`](https://unifiedjs.com/explore/package/rehype-remark/)Â â€”Â HTMLÂ to Markdown
- [`remark-retext`](https://unifiedjs.com/explore/package/remark-retext/)Â â€” Markdown to prose
- [`rehype-retext`](https://unifiedjs.com/explore/package/rehype-retext/)Â â€”Â HTMLÂ to prose

å¦å¤–ï¼ŒåŠ å¼·ç‰ˆçš„ [[markdown]] â€” MDXï¼Œä¹Ÿæ˜¯è—‰ç”± [[unified]] åŠ [[remark]] çš„åŠ›é‡æ‰å¾—ä»¥å®Œæˆï¼ï¼ˆæ™¨æ™¨é æˆ‘åŠ›é‡.jpgï¼‰

å‰é¢è§£ææˆ‘æ˜ç™½ï¼Œå¾Œé¢ç·¨è­¯æˆ‘ä¹Ÿäº†ç„¶ï¼Œä½†ä¸­é–“çš„ syntax tree æ˜¯ä»€éº¼ï¼Ÿ

## Syntax treeï¼Ÿ é‚£æ˜¯ä»€éº¼

Syntax tree åˆç¨±ç‚ºèªæ³•æ¨¹ï¼Œé€šå¸¸æ˜¯é€éè§£æç¨‹å¼ç¢¼å¾Œç”Ÿæˆã€‚é€™ç¨®æ¨¹ç‹€çµæ§‹å¯ä»¥ç”¨ä¾†è¡¨ç¤ºåŸå…ˆçš„ç¨‹å¼ç¢¼ï¼Œè®“æˆ‘å€‘å¯ä»¥æ›´æ–¹ä¾¿åœ°å°ç¨‹å¼ç¢¼é€²è¡Œåˆ†æåŠè½‰æ›ç­‰æ“ä½œã€‚

ä¾æ“šç´°ç¯€çš„ä¿ç•™ç¨‹åº¦ï¼ŒSyntax tree å¯ä»¥åˆ†ç‚º Concrete Syntax Treesï¼ˆCST, a.k.a. Parse Treesï¼‰åŠ Abstract Syntax Treesï¼ˆAST, a.k.a. Syntax Treesï¼‰ å…©ç¨®é¡å‹ã€‚

Concrete Syntax Trees æœƒå°‡ç¨‹å¼ç¢¼çš„æ¯å€‹ç´°ç¯€åŸå°ä¸å‹•åœ°ä¿ç•™ä¸‹ä¾†ï¼Œè®“æˆ‘å€‘å¯ä»¥å¾ˆæ¸…æ¥šçš„äº†è§£ parser å¦‚ä½•çœ‹å¾…æˆ‘å€‘çš„ç¨‹å¼ç¢¼ã€‚è€Œæœ‰æ™‚å€™æˆ‘å€‘å¯èƒ½ä¸åœ¨ä¹é€™éº¼å¤šç´°ç¯€ï¼Œåªéœ€è¦çŸ¥é“ç¨‹å¼ç¢¼å¤§è‡´ä¸Šä¸”ä¸å¤±ç²¾æº–çš„è¼ªå»“ï¼Œæ­¤æ™‚ Abstract Syntax Trees å°±æ´¾ä¸Šç”¨å ´äº†ï¼ AST æœƒéæ¿¾æ‰ä¸€äº›å°æ–¼ç¨‹å¼ç¢¼åˆ†æç„¡ç”¨çš„ç´°ç¯€ï¼Œåƒæ˜¯å¥å°¾çš„åˆ†è™Ÿï¼Œæˆ–æ˜¯ JavaScript çš„å–®å¼•è™Ÿ/é›™å¼•è™Ÿï¼Œç•™ä¸‹ç¨‹å¼ç¢¼çš„ç²¾è¯ã€‚

è€Œé€™äº› Syntax tree è©²å¦‚ä½•è¡¨é”ï¼Œå‰‡éœ€è¦ä¸€ä»½çµ±ä¸€çš„ spec ä¾†è¦ç¯„ï¼Œæ‰èƒ½è®“è§£æå‡ºä¾†çš„ Syntax tree åœ¨å„å€‹ plugins ä¹‹é–“æš¢è¡Œç„¡é˜»ã€‚

å› æ­¤ [unifiedjs.com](https://unifiedjs.com/ "https://unifiedjs.com") å®šç¾©äº†ä¸€ä»½è¦ç¯„ï¼Œç¨±ç‚º **unistï¼ˆUniversal Syntax Treeï¼‰**ï¼Œä¸¦è®“ä¸åŒæ ¼å¼çš„è³‡æ–™åŸºæ–¼é€™ä»½è¦ç¯„ï¼Œè¡ç”Ÿå‡ºå„è‡ªçš„ specã€‚

## å„å¼å„æ¨£çš„ Specs

[unist](https://github.com/syntax-tree/unist#syntax-tree) æœ¬èº«ä¸¦ä¸æ˜¯ä¸€å€‹å®Œæ•´çš„è¦ç¯„ï¼Œè€Œæ˜¯ä½œç‚ºåŸºåº•ï¼Œè®“å…¶ä»–è¦ç¯„å€‘å¯ä»¥ä¾å¾ª unistï¼Œä¸¦å„è‡ªè¡ç”Ÿå‡ºç¬¦åˆä¸åŒèªè¨€ç‰¹æ®Šè¦æ±‚çš„ specsã€‚åƒæ˜¯ [hast (Hypertext Abstract Syntax Tree format)](https://github.com/syntax-tree/hast) ç‚º HTML specã€[nlcst (Natural Language Concrete Syntax Tree format)](https://github.com/syntax-tree/nlcst)Â ç‚ºè‡ªç„¶èªè¨€çš„ specã€[mdast (Markdown Abstract Syntax Tree)](https://github.com/syntax-tree/mdast) ç‚º Markdown specã€ä»¥åŠ [xast (Extensible Abstract Syntax Tree format)](https://github.com/syntax-tree/xast)Â ç‚º XML çš„è¦ç¯„ã€‚

> é¡Œå¤–è©±ï¼Œå‰›é–‹å§‹æŸ¥æ‰¾è³‡æ–™ï¼Œçœ‹åˆ°ä¸€å †éœ§ç…ç…çš„ç¸®å¯«ï¼Œåƒæ˜¯ hastã€mdastã€remarkï¼Œè€Œä¸”æ¯ä¸€å€‹éƒ½æœ‰å„è‡ªçš„ github repoï¼Œè¶Šå¾€ä¸‹é»é ­è¶Šå¤§ ğŸ˜­

æ¥è‘—ï¼Œä¾†ç§ç§ unist è£¡é¢èªªäº†ä»€éº¼

## åˆè¦‹ unist



## Reference

- [Introduction to unified](https://unifiedjs.com/learn/guide/introduction-to-unified/)
- [Abstract vs. Concrete Syntax Trees](https://eli.thegreenplace.net/2009/02/16/abstract-vs-concrete-syntax-trees "Permalink to Abstract vs. Concrete Syntax Trees")
