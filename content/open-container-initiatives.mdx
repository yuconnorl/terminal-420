---
title: Open Container Initiatives (OCI)
description: Open Container Initiatives åŒ…å«ä¸‰å€‹ä¸»è¦çš„è¦ç¯„
id: 961ed19e-5574-4513-a798-5d3ba6146642
date: 2022-Oct-21 10:55:10+08:00
modifiedDate: 2022-Oct-21 10:55:10+08:00
category: Containerization
---

åœ¨ Docker æ–¼ 2013 å¹´æ¨å‡ºæ™‚ï¼Œè§£æ±ºäº†è¨±å¤šé–‹ç™¼äººå“¡åœ¨ä½¿ç”¨å®¹å™¨åŒ–æŠ€è¡“ä¸Šé‡åˆ°çš„å•é¡Œï¼Œå…¶ä¸­åŒ…å«ï¼š

- A container image format
- A method for building container images (Dockerfile/docker build)
- A way to manage container images (docker images, docker rmÂ , etc.)
- A way to manage instances of containers (docker ps, docker rmÂ , etc.)
- A way to share container images (docker push/pull)
- A way to run containers (docker run)

ç•¶æ™‚çš„ Docker æ˜¯ä¸€å€‹ monolithic ç³»çµ±ï¼Œå°‡æ‰€æœ‰åŠŸèƒ½åŒ…æˆä¸€å¤§åŒ…ã€‚ä½†äº‹å¯¦ä¸Šé€™äº›åŠŸèƒ½ä¸¦æ²’æœ‰ç›¸ä¾æ€§ï¼Œä¸”å¯ä»¥ç¨ç«‹å¯¦ä½œæˆä¸€å€‹æ›´å°ã€æ›´å°ˆæ³¨çš„å·¥å…·ï¼Œå†å°‡å½¼æ­¤æ•´åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œä¸¦å¯ä»¥å„è‡ªéµå¾ªä¸€å€‹é€šç”¨æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯**å®¹å™¨åŒ–æ¨™æº–**ã€‚

è€Œç‚ºäº†é¿å…é‡è¤‡é€ è¼ªå­ã€ä¸”è®“å®¹å™¨åŒ–æŠ€è¡“çš„ç›¸é—œé–‹ç™¼æœ‰è¦ç¯„å¯å¾ªï¼Œæ–¼æ˜¯åœ¨ 2015 å¹´ï¼ŒDockerã€[CoreOs](https://getfedora.org/en/coreos?stream=stable)ã€[Google](https://www.google.com/) åŠä¸€äº› container ç›¸é—œçš„ä¼æ¥­è¯æ‰‹å®šç¾©äº† **Open Container Initiatives (OCI)** é€™ä»½å€¡è­°ï¼Œä¸¦å°‡å„è‡ªä½¿ç”¨åœ¨å®¹å™¨åŒ–æŠ€è¡“ä¸Šçš„ code æ‹†æ•£ï¼Œçµ„åˆæˆä¸€å€‹å…¨æ–°å·¥å…· â€”â€” [runC](https://github.com/opencontainers/runc)ï¼Œä¸¦å°‡å…¶é–‹æºï¼Œä½œç‚ºå®šç¾© OCI Spec çš„å¯¦ä½œåƒè€ƒã€‚

Open Container Initiatives åŒ…å«ä¸‰å€‹ä¸»è¦çš„è¦ç¯„ï¼Œåˆ†åˆ¥ç‚º

- Runtime Specification ([runtime-spec](https://github.com/opencontainers/runtime-spec/blob/main/runtime.md#operations))
- Image Specification ([image-spec](https://github.com/opencontainers/image-spec/blob/main/spec.md))
- Distribution Specification ([distribution-spec](https://github.com/opencontainers/distribution-spec/blob/main/spec.md))

<Callout emoji="ğŸ¥¸">
OCI ä¸¦æ²’æœ‰ç›´æ¥è¦ç¯„è©²å¦‚ä½•å¯¦ä½œä¸€å€‹ Container runtimeï¼Œè€Œæ˜¯å®šç¾©å’Œ runtime çš„æºé€šæ–¹å¼
</Callout>

## The 5 principles of Standard Containers

Standard Container æ—¨åœ¨å°‡ software component åŠå…¶æ‰€æœ‰ç›¸ä¾æ€§å¥—ä»¶ (dependencies) ä»¥ä¸€å€‹èƒ½å¤ å¯è‡ªæ•˜ (self-describing) ä¸”å®¹æ˜“å‚³è¼¸ (portable) çš„æ ¼å¼å°è£ï¼Œè®“æ‰€æœ‰ç¬¦åˆè¦ç¯„çš„ Container runtime éƒ½èƒ½åœ¨ä¸éœ€è¦å…¶ä»–ç›¸ä¾å¥—ä»¶ã€ä¸”ä¸ç”¨é¡§æ…®æ©Ÿå™¨åŠ Container å…§å®¹ç‰©çš„æƒ…æ³ä¸‹é‹è¡Œå…¶ä¸­çš„ç¨‹å¼ã€‚

> Define a unit of software delivery called a Standard Container. The goal of a Standard Container is to encapsulate a software component and all its dependencies in a format that is self-describing and portable, so that any compliant runtime can run it without extra dependencies, regardless of the underlying machine and the contents of the container.

### 1. Standard operations

å®šç¾©å°æ–¼ Container èƒ½å¤ é€²è¡Œçš„æ“ä½œï¼Œåƒæ˜¯ `Create`ã€`Run`ã€`Stop`ã€`Kill`ã€`Delete` (Container Lifecycle)

> Standard Containers define a set of STANDARD OPERATIONS. They can be created, started, and stopped using standard container tools; copied and snapshotted using standard filesystem tools; and downloaded and uploaded using standard network tools.

### 2. Content-agnostic

ç„¡è«– Container ä¸­è£çš„æ˜¯ä»€éº¼æ±è¥¿ï¼Œéƒ½éœ€è¦ä»¥ç›¸åŒçš„æ–¹å¼é‹è¡Œé€™å€‹å®¹å™¨

> Standard Containers are CONTENT-AGNOSTIC: all standard operations have the same effect regardless of the contents. They are started in the same way whether they contain a postgres database, a php application with its dependencies and application server, or Java build artifacts.

### 3. Infrastructure-agnostic

ç„¡è«–ä½¿ç”¨ä»»ä½•æ©Ÿå™¨æˆ–åœ¨ä»»ä½•åœ°æ–¹ï¼Œéƒ½èƒ½å¤ æ‰“åŒ…ã€ä¸Šå‚³ã€ä¸‹è¼‰ã€ä¸”é‹è¡Œé€™å€‹å®¹å™¨

> Standard Containers are INFRASTRUCTURE-AGNOSTIC: they can be run in any OCI supported infrastructure. For example, a standard container can be bundled on a laptop, uploaded to cloud storage, downloaded, run and snapshotted by a build server at a fiber hotel in Virginia, uploaded to 10 staging servers in a home-made private cloud cluster, then sent to 30 production instances across 3 public cloud regions.

### 4. Designed for automation

åŸºæ–¼ Content-agnostic åŠ Infrastructure-agnostic å…©é …åŸå‰‡ï¼Œè®“æ¨™æº–åŒ–å®¹å™¨ç›¸ç•¶é©åˆä»¥è‡ªå‹•åŒ–ä¾†å®Œæˆè©²åšçš„å·¥ä½œ

> Standard Containers are DESIGNED FOR AUTOMATION: because they offer the same standard operations regardless of content and infrastructure, Standard Containers, are extremely well-suited for automation. In fact, you could say automation is their secret weapon.

Many things that once required time-consuming and error-prone human effort can now be programmed. Before Standard Containers, by the time a software component ran in production, it had been individually built, configured, bundled, documented, patched, vendored, templated, tweaked and instrumented by 10 different people on 10 different computers. Builds failed, libraries conflicted, mirrors crashed, post-it notes were lost, logs were misplaced, cluster updates were half-broken. The process was slow, inefficient and cost a fortune - and was entirely different depending on the language and infrastructure provider.

### 5. Industrial-grade delivery

æ¨™æº–åŒ–å®¹å™¨æ”¹è®Šäº†éå»ä¼æ¥­äº¤ä»˜è»Ÿé«”çš„éç¨‹ï¼Œè®“é€™å€‹éç¨‹ç®¡ç·šåŒ–ã€å…¨è‡ªå‹•åŒ–

> Standard Containers make INDUSTRIAL-GRADE DELIVERY of software a reality. Leveraging all of the properties listed above, Standard Containers are enabling large and small enterprises to streamline and automate their software delivery pipelines. Whether it is in-house devOps flows, or external customer-based software delivery mechanisms, Standard Containers are changing the way the community thinks about software packaging and delivery.

## é™¤äº† Container ä¹‹å¤–ï¼ŒSpec åŒæ™‚å®šç¾©äº† Container configuration åŠåŸ·è¡Œç’°å¢ƒ

è¦å»ºç«‹ä¸€å€‹ Containerï¼Œéœ€è¦æä¾›çµ¦ runtime [filesystem bundle](https://github.com/opencontainers/runtime-spec/blob/44341cdd36f6fee6ddd73e602f9e3eca1466052f/bundle.md) åŠ optional folder holding the future container's root filesystemï¼Œå…¶ä¸­ filesystem bundle **å¿…é ˆ**åŒ…å«ä¸€å€‹ `config.json` æª”æ¡ˆã€‚

`config.json` contains data necessary to implement standard operations against the container (Create, Start, Query State, Kill, and Delete, the Container Lifecycle). But things start getting really interesting when it comes to the actual structure of theÂ `config.json`Â file.

é€™ä»½ configuration åŒ…å«å…©å€‹ sectionï¼Œ*common* åŠ [*platform-specific*](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config.md#platform-specific-configuration)ã€‚common section åŒ…å«é€šç”¨çš„è¨­å®šï¼Œåƒæ˜¯ `ociVersion`, `root` filesystem path within the bundle, additionalÂ `mounts`Â beyond theÂ `root`, aÂ `process`Â to start in the container, aÂ `user`, and aÂ `hostname`ï¼›*platform-specific* section å‰‡ç”¨ä¾†è¨­ç½®å„å€‹å¹³å°ç‰¹æœ‰çš„åƒæ•¸ï¼Œåƒæ˜¯ [Linux](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-linux.md),Â [Solaris](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-solaris.md),Â [Windows](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-windows.md),Â [z/OS](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-zos.md), åŠÂ [Virtual Machine](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-vm.md)ã€‚è€Œç†ŸçŸ¥çš„ cgroups åŠ namespace çš„è¨­ç½®å‰‡è¢«åŒ…å«åœ¨ [Linux-specific section](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-linux.md) ä¹‹ä¸­ã€‚

> é¡¯ç¤ºåªæœ‰ Linux çš„ Container éœ€è¦ä¾è³´ namespace åŠ cgroups ä¾†å¯¦ä½œï¼Œä½†ä¸æ˜¯æ‰€æœ‰æ¨™æº–åŒ–å®¹å™¨éƒ½æ˜¯ Linux based

## Open Container Initiatives å¦‚ä½•å®šç¾©ä¸€å€‹ Container 

åœ¨ Open Container Initiatives (OCI) Spec ä¸­æåˆ°ï¼šã€Œcontainer æ˜¯ä¸€å€‹ç”¨ä¾†åŸ·è¡Œç¨‹åºçš„ç’°å¢ƒï¼Œä¸”æ­¤ç’°å¢ƒçš„ç¨ç«‹æ€§åŠå¯å–ç”¨è³‡æºå¯ä»¥ç¶“ç”±èª¿æ§åŠ ä»¥é™åˆ¶ã€‚ã€

> *An environment for executing processes with configurable isolation and resource limitations. For example, namespaces, resource limits, and mounts are all part of the container environment.* -- [OCI Spec#container](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/glossary.md#container)

åœ¨ [runtime & Lifecycle Spec](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/glossary.md) ä¸­æåˆ°ï¼Œä»»ä½•ä½¿ç”¨åˆè¦ Container runtime ä¾†å»ºç«‹çš„ Container **å¿…é ˆ** èƒ½å¤ ä½¿ç”¨ Spec ä¸­å®šç¾©çš„æ‰€æœ‰ Container Lifecycle methodã€‚


## Virtual Machines are actually containers?!

VM Container çš„æ–¹å¼å’Œæˆ‘å€‘èªçŸ¥çš„ Linux Container ç•¥ç‚ºä¸åŒã€‚ä»–å…ˆè™›æ“¬ç•«å‡º VM éœ€è¦çš„ç¡¬é«”è¨­å‚™ï¼Œæ¥è‘—åœ¨é€™å€‹ç¡¬é«”ä¸Šé–‹å•Ÿå®Œæ•´çš„ OS (kernel + image)ï¼Œæœ€çµ‚çµ„æˆ VM Container çš„å¤§ç®±å­ã€‚

### Further reading

[Virtual-machine-specific Container Configuration](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/config-vm.md)

---

## Reference

- [Open Container Initiative](https://opencontainers.org/)
- [Open Container Initiative Github](https://github.com/opencontainers)
- [The 5 principles of Standard Containers](https://github.com/opencontainers/runtime-spec/blob/20a2d9782986ec2a7e0812ebe1515f73736c6a0c/principles.md#the-5-principles-of-standard-containers)
- [What Is a Standard Container (2021 edition)](https://iximiuz.com/en/posts/oci-containers/)
